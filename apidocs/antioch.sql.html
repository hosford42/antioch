<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>antioch.sql : API documentation</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <link href="apidocs.css" type="text/css" rel="stylesheet" />
    <script src="sorttable.js" type="text/javascript"></script>
    <script src="pydoctor.js" type="text/javascript"></script>
  </head>
  <body>
    <h1 class="module">a.sql : module documentation</h1>
    <p>
      <span id="part">Part of <a href="antioch.html">antioch</a></span>
      <a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py">View Source</a>
      
    </p>
    <div>
      
    </div>
    <div>SQL building facilities.<table class="fieldTable"></table></div>

    
    
    <div id="splitTables">
      <table class="children sortable" id="id193">
  
  <tr>
    <th>Line #</th>
    <th>Kind</th>
    <th>Name</th>
    <th>Docs</th>
  </tr>
<tr class="function">
    
    <td class="lineno"><a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L15">15</a></td>
    <td>Function</td>
    <td><a href="antioch.sql.html#strftime">strftime</a></td>
    <td><span>Format the provided datetime object using the given format string.</span></td>
  </tr><tr class="function">
    
    <td class="lineno"><a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L81">81</a></td>
    <td>Function</td>
    <td><a href="antioch.sql.html#build_insert">build_insert</a></td>
    <td><span>Given a table name and a dictionary, construct an INSERT query. Keys 
are</span></td>
  </tr><tr class="function">
    
    <td class="lineno"><a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L119">119</a></td>
    <td>Function</td>
    <td><a href="antioch.sql.html#build_set">build_set</a></td>
    <td><span>Given a dictionary, construct a SET clause. Keys are sorted 
alphabetically</span></td>
  </tr><tr class="function">
    
    <td class="lineno"><a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L141">141</a></td>
    <td>Function</td>
    <td><a href="antioch.sql.html#build_update">build_update</a></td>
    <td><span>Given a table name, a dictionary, and a set of constraints, construct an
UPDATE</span></td>
  </tr><tr class="function">
    
    <td class="lineno"><a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L164">164</a></td>
    <td>Function</td>
    <td><a href="antioch.sql.html#build_select">build_select</a></td>
    <td><span>Given a table name and a dictionary, construct a SELECT query. Keys 
are</span></td>
  </tr><tr class="function">
    
    <td class="lineno"><a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L207">207</a></td>
    <td>Function</td>
    <td><a href="antioch.sql.html#build_delete">build_delete</a></td>
    <td><span>Given a table name, and a set of constraints, construct a DELETE 
query.</span></td>
  </tr><tr class="function">
    
    <td class="lineno"><a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L230">230</a></td>
    <td>Function</td>
    <td><a href="antioch.sql.html#build_where">build_where</a></td>
    <td><span>Given a dictionary, construct a WHERE clause. Keys are sorted 
alphabetically</span></td>
  </tr><tr class="function">
    
    <td class="lineno"><a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L315">315</a></td>
    <td>Function</td>
    <td><a href="antioch.sql.html#make_list">make_list</a></td>
    <td><span>Convert a list of things to a string suitable for use with IN.</span></td>
  </tr><tr class="function">
    
    <td class="lineno"><a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L323">323</a></td>
    <td>Function</td>
    <td><a href="antioch.sql.html#escape_sequence">escape_sequence</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td class="lineno"><a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L326">326</a></td>
    <td>Function</td>
    <td><a href="antioch.sql.html#escape_item">escape_item</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td class="lineno"><a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L329">329</a></td>
    <td>Function</td>
    <td><a href="antioch.sql.html#quoted_string_literal">quoted_string_literal</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td class="lineno"><a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L337">337</a></td>
    <td>Function</td>
    <td><a href="antioch.sql.html#mysql_string_literal">mysql_string_literal</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td class="lineno"><a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L341">341</a></td>
    <td>Function</td>
    <td><a href="antioch.sql.html#interp">interp</a></td>
    <td><span>Interpolate the provided arguments into the provided query, using</span></td>
  </tr><tr class="class">
    
    <td class="lineno"><a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L361">361</a></td>
    <td>Class</td>
    <td><a href="antioch.sql.RAW.html">RAW</a></td>
    <td><span>Allows RAW SQL to be embedded in constructed queries.</span></td>
  </tr><tr class="class">
    
    <td class="lineno"><a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L380">380</a></td>
    <td>Class</td>
    <td><a href="antioch.sql.NOT.html">NOT</a></td>
    <td><span>Allows NOTs to be embedded in constructed queries.</span></td>
  </tr><tr class="class">
    
    <td class="lineno"><a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L391">391</a></td>
    <td>Class</td>
    <td><a href="antioch.sql.GT.html">GT</a></td>
    <td><span>Allow for use of a greater-than.</span></td>
  </tr><tr class="class">
    
    <td class="lineno"><a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L402">402</a></td>
    <td>Class</td>
    <td><a href="antioch.sql.LT.html">LT</a></td>
    <td><span>Allow for use of a less-than.</span></td>
  </tr>
  
</table>
      
      
    </div>
    
    
    

    <div class="function">
  <a name="antioch.sql.strftime">
    
  </a>
  <a name="strftime">
    
  </a>
  <div class="functionHeader">
    
    def
    strftime(dt, fmt):
    <a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L15" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>Format the provided datetime object using the given format string.</p>
<p>This function will properly format dates before 1900.<table class="fieldTable"></table></div>
  </div>
</div><div class="function">
  <a name="antioch.sql.build_insert">
    
  </a>
  <a name="build_insert">
    
  </a>
  <div class="functionHeader">
    
    def
    build_insert(table, data=None, **kwargs):
    <a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L81" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>Given a table name and a dictionary, construct an INSERT query. Keys are
sorted alphabetically before output, so the result of passing a 
semantically identical dictionary should be the same every time.</p>
<p>Use modu.sql.RAW to embed SQL directly in the VALUES clause.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">table</td><td>the desired table name
 (type: str
)</td></tr><tr><td></td><td class="fieldArg">data</td><td>a column name to value map
 (type: dict
)</td></tr><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">an SQL query
 (type: str
)</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="antioch.sql.build_set">
    
  </a>
  <a name="build_set">
    
  </a>
  <div class="functionHeader">
    
    def
    build_set(data=None, **kwargs):
    <a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L119" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>Given a dictionary, construct a SET clause. Keys are sorted 
alphabetically before output, so the result of passing a semantically 
identical dictionary should be the same every time.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">data</td><td>a column name to value map
 (type: dict
)</td></tr><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">an SQL fragment
 (type: str
)</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="antioch.sql.build_update">
    
  </a>
  <a name="build_update">
    
  </a>
  <div class="functionHeader">
    
    def
    build_update(table, data, constraints):
    <a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L141" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>Given a table name, a dictionary, and a set of constraints, construct an
UPDATE query. Keys are sorted alphabetically before output, so the result 
of passing a semantically identical dictionary should be the same every 
time.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">table</td><td>the desired table name
 (type: str
)</td></tr><tr><td></td><td class="fieldArg">data</td><td>a column name to value map
 (type: dict
)</td></tr><tr><td></td><td class="fieldArg">constraints</td><td>a column name to value map
 (type: dict
)</td></tr><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">an SQL query
 (type: str
)</td></tr><tr class="fieldStart"><td class="fieldName">See Also</td><td colspan="2"><a href="antioch.sql.html#build_where"><code>build_where()</code></a>
</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="antioch.sql.build_select">
    
  </a>
  <a name="build_select">
    
  </a>
  <div class="functionHeader">
    
    def
    build_select(table, data=None, **kwargs):
    <a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L164" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div><p>Given a table name and a dictionary, construct a SELECT query. Keys are 
sorted alphabetically before output, so the result of passing a 
semantically identical dictionary should be the same every time.</p>
<p>These SELECTs always select * from a single table.</p>
<p>Special keys can be inserted in the provided dictionary, such that:</p>
<ul>
  <li>
    <b>__select_keyword</b>:  is inserted between 'SELECT' and '*'
  </li>
  <li>
    <b>__select_fields</b>:   is used after 'SELECT' instead of '*'
  </li>
</ul>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">table</td><td>the desired table name
 (type: str
)</td></tr><tr><td></td><td class="fieldArg">data</td><td>a column name to value map
 (type: dict
)</td></tr><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">an SQL query
 (type: str
)</td></tr><tr class="fieldStart"><td class="fieldName">See Also</td><td colspan="2"><a href="antioch.sql.html#build_where"><code>build_where()</code></a>
</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="antioch.sql.build_delete">
    
  </a>
  <a name="build_delete">
    
  </a>
  <div class="functionHeader">
    
    def
    build_delete(table, constraints=None, **kwargs):
    <a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L207" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>Given a table name, and a set of constraints, construct a DELETE query. 
Keys are sorted alphabetically before output, so the result of passing a 
semantically identical dictionary should be the same every time.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">table</td><td>the desired table name
 (type: str
)</td></tr><tr><td></td><td class="fieldArg">constraints</td><td>a column name to value map
 (type: dict
)</td></tr><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">an SQL query
 (type: str
)</td></tr><tr class="fieldStart"><td class="fieldName">See Also</td><td colspan="2"><a href="antioch.sql.html#build_where"><code>build_where()</code></a>
</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="antioch.sql.build_where">
    
  </a>
  <a name="build_where">
    
  </a>
  <div class="functionHeader">
    
    def
    build_where(data=None, use_where=True, **kwargs):
    <a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L230" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div><p>Given a dictionary, construct a WHERE clause. Keys are sorted 
alphabetically before output, so the result of passing a semantically 
identical dictionary should be the same every time.</p>
<p>Special keys can be inserted in the provided dictionary, such that:</p>
<ul>
  <li>
    <b>__order_by</b>:        inserts an ORDER BY clause. ASC/DESC must be 
    part of the string if you wish to use them
  </li>
  <li>
    <b>__limit</b>:           add a LIMIT clause to this query
  </li>
</ul>
<p>Additionally, certain types of values have alternate output:</p>
<ul>
  <li>
    <b>list/tuple types</b>:          result in an IN statement
  </li>
  <li>
    <b>None</b>                                       results in an ISNULL 
    statement
  </li>
  <li>
    <b>sql.RAW objects</b>:   result in directly embedded SQL, such that 
    <code>'col1':RAW(&quot;%s = ENCRYPT('whatever')&quot;)</code> equals 
    <code>col1 = ENCRYPT('whatever')</code>
  </li>
  <li>
    <b>persist.NOT objects</b>:       result in a NOT statement
  </li>
</ul>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">data</td><td>a column name to value map
 (type: dict
)</td></tr><tr><td></td><td class="fieldArg">use_where</td><td>should the result start with &quot;WHERE&quot;? (Default: True)
 (type: bool
)</td></tr><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">an SQL fragment
 (type: str
)</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="antioch.sql.make_list">
    
  </a>
  <a name="make_list">
    
  </a>
  <div class="functionHeader">
    
    def
    make_list(items):
    <a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L315" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>Convert a list of things to a string suitable for use with IN.</p>
<p>Uses interp to escape values.<table class="fieldTable"></table></div>
  </div>
</div><div class="function">
  <a name="antioch.sql.escape_sequence">
    
  </a>
  <a name="escape_sequence">
    
  </a>
  <div class="functionHeader">
    
    def
    escape_sequence(seq, conv):
    <a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L323" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="antioch.sql.escape_item">
    
  </a>
  <a name="escape_item">
    
  </a>
  <div class="functionHeader">
    
    def
    escape_item(item, conv):
    <a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L326" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="antioch.sql.quoted_string_literal">
    
  </a>
  <a name="quoted_string_literal">
    
  </a>
  <div class="functionHeader">
    
    def
    quoted_string_literal(s, d):
    <a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L329" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="antioch.sql.mysql_string_literal">
    
  </a>
  <a name="mysql_string_literal">
    
  </a>
  <div class="functionHeader">
    
    def
    mysql_string_literal(s, d):
    <a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L337" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="antioch.sql.interp">
    
  </a>
  <a name="interp">
    
  </a>
  <div class="functionHeader">
    
    def
    interp(query, *args):
    <a href="https://github.com/philchristensen/antioch/blob/master/src/antioch/sql.py#L341" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>Interpolate the provided arguments into the provided query, using the 
DB-API's default conversions, with the additional 'RAW' support from 
modu.sql.RAW2Literal<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">query</td><td>A query string with placeholders
 (type: str
)</td></tr><tr><td></td><td class="fieldArg">args</td><td>A list of query values
 (type: sequence
)</td></tr><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">an interpolated SQL query
 (type: str
)</td></tr></table></div>
  </div>
</div>
    <address>
      <a href="index.html">API Documentation</a> for <a href="http://philchristensen.github.com/antioch">antioch</a>, generated by <a href="http://codespeak.net/~mwh/pydoctor/">pydoctor</a> at 2010-12-10 15:11:17.
    </address>
  </body>
</html>